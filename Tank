#include<Servo.h>
Servo myservo;
const int Pin=0;
const int limit=480;

int pos,k=0;
int pump_relay = 12;
const int capteur_D = 4;
//const int capteur_A = A0;

int val_analogique;

void setup()
{
    pinMode(capteur_D, INPUT);
    myservo.attach(11);
    myservo.write(0);
    pinMode(pump_relay, OUTPUT);
      pinMode(12,OUTPUT);
  //pinMode(capteur_A, INPUT);
  Serial.begin(9600);
}

void loop()
{
   int value;
  value=analogRead(Pin);
  Serial.println("Soil Moisture:");
  Serial.println(value);
  delay(1000);
  //Rain water 
if(digitalRead(capteur_D) == LOW) 
  {
    Serial.println("Digital value : wet"); 
    //For Servo Motor
   Serial.println("Servo started.");
   for(pos=0;pos<=180;pos++)
   {
    myservo.write(pos);
    delay(25);
   }
   k=1;
  }
   
else
  {
    Serial.println("Digital value : dry");
    delay(25);
    if(k==1)
    {
      for(pos=180;pos>=0;pos--)
      {
        myservo.write(pos);
        delay(25);
      } 
      delay(25);
   Serial.println("Servo stopped.");
    }
    k=0;
    delay(10); 
  }
 //Soil Moisture 
  if (value<limit)
  {
    digitalWrite(13,HIGH);
  }
  else
  {
    digitalWrite(13,LOW);
  }
    delay(10); 
  }
//val_analogique=analogRead(capteur_A); 
 //Serial.print("Analog value : ");
// Serial.println(val_analogique); 
 //Serial.println("");
  delay(1000);
}
